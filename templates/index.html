{% extends "base.html" %}

{% block title %}Home - Hue Shift{% endblock %}

{% block content %}
<div class="jumbotron p-5 bg-light rounded">
    <h1 class="display-4">Bring Your Photos to Life</h1>
    <p class="lead">Turn black & white into color - Simple, Fast, Free</p>
    <div class="row mt-4">
        <div class="col-md-6 mb-3">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="bi bi-image display-4 mb-3 text-primary"></i>
                    <h5 class="card-title">Photos</h5>
                    <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" class="upload-form">
                        <input type="file" name="image" accept="image/*" class="form-control mb-2" required>
                        <button type="submit" class="btn btn-primary">Upload & Process</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-3">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="bi bi-film display-4 mb-3 text-primary"></i>
                    <h5 class="card-title">Videos</h5>
                    <a href="{{ url_for('upload_video') }}" class="btn btn-primary">Try Now</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mt-5 text-center">
    <a href="{{ url_for('gallery') }}" class="btn btn-lg btn-outline-primary">
        <i class="bi bi-images me-2"></i>View Gallery
    </a>
</div>

<div id="result-container" class="mt-4" style="display: none;">
    <div class="row">
        <div class="col-md-6">
            <h4>Original</h4>
            <img id="original-image" class="img-fluid" alt="Original image">
        </div>
        <div class="col-md-6">
            <h4>Colorized</h4>
            <img id="result-image" class="img-fluid" alt="Colorized image">
        </div>
    </div>
</div>

<script>
document.querySelector('.upload-form').onsubmit = async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    
    try {
        const response = await fetch("{{ url_for('upload_file') }}", {
            method: 'POST',
            body: formData
        });
        
        const result = await response.json();
        
        if (result.success) {
            document.getElementById('result-container').style.display = 'block';
            document.getElementById('original-image').src = result.original_path;
            document.getElementById('result-image').src = result.result_path;
        } else {
            alert(result.error || 'Processing failed');
        }
    } catch (err) {
        alert('Error: ' + err.message);
    }
};
</script>
{% endblock %} 